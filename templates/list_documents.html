{% extends "base.html" %}

{% block title %}List Documents{% endblock %}

{% block content %}
<form method="get" action="/list_documents" class="filter-form">
    <div class="filter-field">
        <label for="author">Author</label>
        <input type="text" name="author" id="author" value="{{ filters.author }}">
    </div>
    <div class="filter-field">
        <label for="keyword">Keyword</label>
        <input type="text" name="keyword" id="keyword" value="{{ filters.keyword }}">
    </div>
    <div class="filter-field">
        <label for="date_from">From Date</label>
        <input type="date" name="date_from" id="date_from" value="{{ filters.date_from }}">
    </div>
    <div class="filter-field">
        <label for="date_to">To Date</label>
        <input type="date" name="date_to" id="date_to" value="{{ filters.date_to }}">
    </div>
    <div class="filter-buttons">
        <button type="submit" class="btn btn-primary">Filter</button>
        <a href="/list_documents" class="btn btn-secondary">Clear</a>
    </div>
</form>


<table>
    <thead>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Keywords</th>
            <th>Summary</th>
            <th>Created At</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    {% for pdf in pdfs %}
        <tr>
            <td>{{ pdf.title }}</td>
            <td>{{ pdf.author }}</td>
            <td>{{ pdf.keywords | join(', ') }}</td>
            <td>{{ pdf.summary }}</td>
            <td>{{ pdf.created_at.strftime('%Y-%m-%d %H:%M') if pdf.created_at else '' }}</td>
            <td>
                <a href="/uploads/{{ pdf.filename }}" target="_blank" class="button">View PDF</a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
